import com.github.javaparser.ast.Node;
import com.github.javaparser.ast.body.MethodDeclaration;
import com.github.javaparser.ast.body.Parameter;
import com.github.javaparser.ast.stmt.BlockStmt;
import com.github.javaparser.ast.stmt.Statement;
import com.github.javaparser.ast.type.Type;

import java.io.StringReader;
import java.util.*;

/*
 * Method class that holds information about a particular method
 * - the name of the method, the return type of the method.
 */

public class Method {
	private String methodName;
	private Type returnType;
	private List<Parameter> parameters;
	private BlockStmt body;
	
	public Method(MethodDeclaration methodDeclaration){
		this.methodName = methodDeclaration.getNameAsString();
		this.parameters = methodDeclaration.getParameters();
		this.returnType = methodDeclaration.getType();
		this.body = methodDeclaration.getBody().get();
		
	}
	
	public String getMethodName(){
		return this.methodName;
	}
	
	public Type getReturnType(){
		return this.returnType;
	}
	
	public List<Parameter> getMethodParameters(){
		return this.parameters;
	}
	
	public BlockStmt getBody(){
		return this.body;
	}
	
	public String getBodyWithoutComments(){
		String bodyWithoutComments = "";
		String originalBody = this.body.toString();
		boolean foundCommentInline = false;
		boolean foundCommentBlock = false;
		for(int i = 0; i<originalBody.length(); i++){
			if(i+2<originalBody.length()){
				if(originalBody.substring(i, i+2).compareTo("/*")==0){
					foundCommentBlock = true;
				}
				else if(originalBody.substring(i, i+2).compareTo("*/")==0){
					foundCommentBlock = false;
				}
				else if(originalBody.substring(i, i+2).compareTo("//")==0){
					foundCommentInline = true;
				}
				else if(foundCommentInline && originalBody.charAt(i)=='\n')){
					foundCommentInline = false;
					continue;
				}
			}
			if(!(foundCommentBlock || foundCommentInline)){
				bodyWithoutComments = bodyWithoutComments + originalBody.charAt(i);
			}
			
		}
		return bodyWithoutComments;
	}
}
